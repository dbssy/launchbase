{% extends "admin/layout.njk" %}

{% block content %}

  <section class="form-edit">
    <div class="header">
      <h2>Editando receita</h2>  
      <span>
        <form id="delete" method="POST" action="/admin/recipes?_method=DELETE">
          <input type="hidden" name="id" value="{{ recipe.id }}">
          <button type="submit">Deletar</button>
        </form>
      </span>

      <span>
        <form id="submit" method="POST" action="/admin/recipes?_method=PUT" enctype="multipart/form-data">
          <button type="submit">Salvar receita</button>
      </span>
    </div>

      <input type="hidden" name="id" value="{{ recipe.id }}">
      <div class="details">
        {% include "admin/recipes/fields.njk" %}
      </div>
    </form>
  </section>

  <script>
    const formDelete = document.querySelector("#delete");
    formDelete.addEventListener("submit", (e) => {
      const confirmation = confirm("Deseja realmente deletar?");
      if (!confirmation) e.preventDefault();
    });
  </script>

{% endblock %}